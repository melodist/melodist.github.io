---
layout: default
title: PART-2
parent: Java TPC(생각하고, 표현하고, 코딩하고)
grand_parent: Java
permalink: docs/Java/TPC/PART-2
---

## Inheritance(수평적구조VS수직적구조)

### 상속 -> 클래스의 설계(행위적인 측면)

Dog와 Cat이라는 클래스를 설계할 경우 모두 비슷한 성질(이름, 나이, 종)을 갖고 비슷한 행동(먹다)을 한다. 

이러한 클래스를 설계하는 방향은 크게 두 가지가 있다.

- 수평적 설계

서로 비슷한 객체에 대하여 코드의 중복이 발생하고 새로운 요구사항에 대한 코드의 수정이 불가피하므로 관리하기가 어렵다.

- 수직적 설계(계층화, 상속구조)

수평적 설계의 단점을 극복하여 확장을 쉽게 할 수 있지만 코드가 복잡해진다.

super class(상위, 부모): 추상화, 보편화, 일반화, 개념화

sub class(하위, 자식): 세분화, 상세화, 구체화, 구상화

- 소스 코드가 담겨있는 .java 파일을 타인에게 제공하지 않고 바이트 코드가 담겨있는 .class 파일만으로 타인이 개발할 수 있도록 하기 위해서는 어떻게 해야할까?

### 상속 개념

`public class A extends B` 와 같은 형식으로 A가 B를 상속받을 수 있다.

`Object`: Java의 모든 클래스의 최상위 클래스로 상속을 받지 않는 객체는 Object를 상속받는다.

`super()`: 자식의 생성자에서 부모의 생성자를 호출. 부모 객체가 먼저 만들어져야 하므로 따로 입력하지 않아도 자동으로 호출됨.

ex. Animal 클래스를 부모로 갖는 Dog 클래스를 호출할 경우...

1.  Dog 클래스 생성자에 의하여 Animal 클래스의 생성자가 호출되고
2. Animal 클래스 생성자에 의하여 Object 클래스의 생성자가 호출된다.

## 재정의(Override)

### Override(재정의)

- 상속관계에서 상속받은 하위 클래스가 상위 클래스의 동작을 수정하는 것
- 부모 클래스에 있는 메소드를 자식 클래스에서 재정의하는 것
- 호출할 메소드가 실행 시점(런타임)에서 결정되는 동적 바인딩
  - static 메소드는 컴파일 시점에 메모리에 올라가기 때문에 오버라이딩 될 수 없다!
- Override를 통해 부모 클래스를 가지고 자식 클래스에 접근할 수 있다.

## 나보다 부모가 먼저야!

### 상속관계에서 객체생성 방법

직접 생성 `Dog d = new Dog();` -> 부모 클래스를 이용하지 않는 방식

간접 생성 `Animal d = new Dog();` -> 하위 클래스의 동작 방식을 모를 때, class(실행) 파일만 있고 java(소스) 파일이 없는 경우

## 부모 자식간 형변환이 된다.

### Upcasting(자동형변환)

- 자식 클래스의 객체가 부모 클래스의 객체로 형변환되는 것을 말한다.

```java
Animal d = new Dog();
```

위의 코드를 보면 부모 클래스 Animal 타입인 d가 자식 클래스 Dog 객체를 가리키고 있다.

### Downcasting(강제형변환)

- Upcasting과 반대로 자신의 고유한 특성을 잃은 서브 클래스의 객체를 다시 복구시켜주는 것을 말한다. 즉, **upcasting된 객체를 원상태로 되돌리는 것**이다.

```java
Animal r = new Cat(); // upcasting
// r.night(); -> error
Cat c = (Cat)r; // downcasting
c.night();
```

- `.` 연산자는 캐스팅 연산자보다 우선순위가 높으므로 캐스팅과 메소드 호출을 동시에 할 경우 괄호를 이용해야 한다.
- 원래의 객체가 아닌 다른 서브 클래스로 downcasting 할 경우 `ClassCastException`이 발생한다.
- Upcasting에서는 부모 클래스에서 구현한 메소드만을 호출할 수 있기 때문에, 자식 클래스에서 구현한 메소드를 호출해야 할 경우 upcasting된 객체를 downcasting으로 복구하여 메소드를 호출하여야 한다.

이러한 형변환은 OOP의 원리 중 다형성(polymorphism)과 연관이 있다.

## 리모콘 너무 좋은데(다형성 이론)

### Polymorphism(다형성)

- 상속관계에 있는 클래스에서 상위 클래스가 동일한 메시지로 하위 클래스들을 서로 다르게 동작시키는 객체지향 원리(개념)
- 하위 클래스의 동작 방식을 알 수 없어도 상위 클래스를 통해 하위 클래스를 구동시킬 수 있다.

## 너무 좋아 좋아! 다형성의 활용

### 1. 다형성 이론의 전제조건(부모 클래스를 잘 활용하라)

- 상속관계가 되어야 한다.
- 객체 생성을 upcasting으로 할 것 (상위 클래스가 하위 클래스에게 메시지를 보내야 하므로)
- 하위 클래스가 반드시 재정의(override)해야 한다.
- 동적 바인딩을 통해 실현된다. 이는 프로그램의 속도를 떨어뜨리는 원인이 된다.

### 2. 다형성 활용 방법

1. 다형성 인수(데이터 이동)

```java
Dog d = new Dog();
display(d);
Cat C = new Cat();
display(c);

public static void display(Animal r) {
	r.eat();
    if (r instanceof Cat) {
        ((Cat)r).night();
    }
}
```

Animal의 하위 클래스인 Dog와 Cat을 `display`의 매개변수로 받을 수 있다

2. 다형성 배열 (서로 다른 하위 클래스를 하나의 배열에 담을 수 있다)

```
Animal[] r = new Animal[2];
r[0] = new Dog();
r[1] = new Cat();
r[0].eat();  // 개처럼 먹다.
r[1].eat();  // 고양이처럼 먹다.
((Cat)r[1]).night();  // 밤에 눈에서 빛이 난다. -> downcasting
```

## 추상클래스(일부 다형성 보장)

```JAVA
public abstract class Animal{ // 추상클래스
	public abstract void eat(); // 추상메소드
	public void move() { // 구현메서드
		System.out.println("무리를 지어서 이동한다.");
	}
}
```

- 위의 코드와 같이 `abstract` 구문을 이용하여 추상클래스를 구현할 수 있다.

- 하위 클래스에서 추상메소드를 재정의하지 않으면 예외가 발생한다.

- 인터페이스와 달리 추상클래스에는 구현메소드를 정의할 수 있다.

## 인터페이스(100% 다형성 보장)

```java
public interface RemoCon{ // 인터페이스
	public abstract void chUp(); // 추상메소드
	public void chDown();
	public abstract void internet();
}
```

- 인터페이스는 추상클래스와 다르게 구현메소드를 가질 수 없다.

## 부모가 있어서 너무 좋아!

### 추상클래스와 인터페이스(다형성을 보장하기 위함)

상위 클래스를 추상클래스나 인터페이스로 만들어야 다형성을 보장(재정의를 반드시 해야 됨) 할 수 있다.

#### 공통점

- 다형성을 보장하기 위하여 등장
- `new`를 이용하여 인스턴스를 생성할 수 없다.
- 하위 클래스에 의해 구현되어야 한다. (override: 재정의 필수)
- 부모(상위) 클래스의 역할로 사용한다(upcasting으로 객체를 생성).
- 추상 메소드를 가진다.

#### abstract class(추상클래스)

- 서로 기능이 비슷한 클래스의 공통부분을 묶을 때 사용
- 구현 메소드와 추상 메소드를 함께 가질 수 있다.
- 50% 디자인(설계), 50% 구현
- extends 키워드 사용

#### interface(인터페이스)

- 서로 기능이 다른 클래스의 공통부분을 묶을 때 사용
- 100% 추상 메소드로 이루어지므로 구현 메소드를 가질 수 없다.
- 100% 디자인(설계), 규약
-  implements 키워드 사용
- Java는 단일상속만을 지원하는 것이 원칙이지만 인터페이스는 다중상속 형태를 지원한다.
- 추상 메소드와 final static 변수(상수)만을 멤버로 가질 수 있다.