---
layout: post
title: 그림으로 배우는 쿠버네티스 - 9. 효과적인 애플리케이션 구성 및 관리
tags: [Kubernetes, Pick8s, UF]
permalink: /docs/Kubernetes/Pick8s/9
date: 2022-03-30 21:35:00
---
# 효과적인 애플리케이션 구성 및 관리

## 애플리케이션에 컨피그맵(ConfigMap)을 이용해 추가 설정 넣기

### ConfigMap 활용 방법

![효과적인 애플리케이션 구성 및 관리 - 01  컨피그맵](https://user-images.githubusercontent.com/52024566/160839649-02ece01b-12d6-4242-a81c-88186edfd584.png)

- `ConfigMap` 오브젝트를 생성하여 컨테이너에서 `envFrom.configMapRef`로 사용할 수 있음

![효과적인 애플리케이션 구성 및 관리 - 04  컨피그맵](https://user-images.githubusercontent.com/52024566/160839660-4e870b9d-fe6b-43ed-95ef-41a3ed43d177.png)

- 다음과 같이 `ConfigMap`이 변경되면 같은 애플리케이션이 다른 내용을 출력함

![효과적인 애플리케이션 구성 및 관리 - 02  컨피그맵](https://user-images.githubusercontent.com/52024566/160839656-782f84ea-ee96-46a5-a5f9-f7aec2f1e008.png)

- `env.name`을 설정하고 `valueFrom.configMapKeyRef`를 사용할 수도 있음

![효과적인 애플리케이션 구성 및 관리 - 03  컨피그맵](https://user-images.githubusercontent.com/52024566/160839657-71ed9ad9-b07e-43ea-ab29-d3de452cd782.png)

- `configMap` 자체를 볼륨으로 마운트할 수도 있음
- 소프트 링크로 `ConfigMap`의 데이터가 연결됨

## 애플리케이션에 시크릿(Secret)을 이용해 추가 설정을 암호화해서 넣기

### secrets.yaml

![효과적인 애플리케이션 구성 및 관리 - 05  시크릿](https://user-images.githubusercontent.com/52024566/160839662-7dc2f2ab-4abc-4634-bb95-98d960a0cc7a.png)

- `kubectl create secret` 명령어로 추가 설정 암호화
- 노출되는 순간 쉽게 디코딩이 가능하므로 보안에 유의

### deploy-secretKeyRef-w-pvc.yaml

![효과적인 애플리케이션 구성 및 관리 - 06  시크릿](https://user-images.githubusercontent.com/52024566/160839665-339c2a7b-fc9e-4a59-9090-fe8adb1b31c4.png)

- `secretKeyRef`
    - `name`: 생성한 `Secret` 이름
    - `key`: `Secret`에 저장한 추가 설정

### 변경할 수 없는(immutable) 시크릿과 컨피그맵

![효과적인 애플리케이션 구성 및 관리 - 07  시크릿](https://user-images.githubusercontent.com/52024566/160839667-2b9fab26-3ffa-4c0e-97f4-2be818c2c617.png)

