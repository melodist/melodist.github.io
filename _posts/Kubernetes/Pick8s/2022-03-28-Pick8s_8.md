---
layout: post
title: 그림으로 배우는 쿠버네티스 - 8. 쿠버네티스 클러스터 구성 및 관리
tags: [Kubernetes, Pick8s, UF]
permalink: /docs/Kubernetes/Pick8s/8
date: 2022-03-28 23:01:00
---
# 쿠버네티스 클러스터 구성 및 관리

## 클라우드의 권한 관리(IAM)

![쿠버네티스 클러스터 구성 및 관리 - 01  IAM](https://user-images.githubusercontent.com/52024566/160418315-5284513b-a12c-42e3-98bb-71e7b3c385c3.png)

### 사용 목적
1. 허가받은 사용자만 접속할 수 있도록 통제
2. 사용자마다의 적절한 권한 관리
3. 일관성을 가지는 권한 관리

## 역할 기반 접근 제어(RBAC)

### 현재 적용된 인가(Authorization) 설정

![쿠버네티스 클러스터 구성 및 관리 - 02  RBAC](https://user-images.githubusercontent.com/52024566/160418325-650cb0d1-615b-4201-b055-d4bfc81c317c.png)

### 역할 기반 접근 제어의 전체 구조

![쿠버네티스 클러스터 구성 및 관리 - 03  RBAC](https://user-images.githubusercontent.com/52024566/160418328-352f58fa-4aee-4926-82ff-1c954639a679.png)

- `Role`과 `SA(Service Account)`를 `RoleBinding`으로 묶음

### 컨텍스트(쿠버네티스 클러스터)로 구분된 구조

![쿠버네티스 클러스터 구성 및 관리 - 04  RBAC](https://user-images.githubusercontent.com/52024566/160418329-9b3a981b-a69d-4e11-8982-1c6c836d0c26.png)

- 컨텍스트 단위로 묶기 위하여 네임스페이스 적용

### ns-sa-dev-both.yaml

![쿠버네티스 클러스터 구성 및 관리 - 05  RBAC](https://user-images.githubusercontent.com/52024566/160418334-86bfd9d4-a111-4322-b53f-a8200202d235.png)

- `Namespace`:
- `ServiceAccount`: 누가 할 것인가? 의 누구

### role-get-dev1.yaml, role-get-dev2.yaml

![쿠버네티스 클러스터 구성 및 관리 - 06  RBAC](https://user-images.githubusercontent.com/52024566/160418336-34364e48-00ac-4fcb-b10f-16ea1e3aeb80.png)

- `rules`: 무엇을 할 것인가? 의 무엇

### rolebidning-dev1.yaml, rolebidning-dev2.yaml

![쿠버네티스 클러스터 구성 및 관리 - 07  RBAC](https://user-images.githubusercontent.com/52024566/160418339-ca119f2a-7f29-4c48-8af7-d8e4a9ebdcc6.png)

- `subjects`와 `roleRef`를 묶어줌
- `apiGroup`을 `""`으로 지정하면 SA가 현재 속한 그룹으로 자동 지정됨

### sa-pod-admin, clusterrole, clusterrolebinding.yaml

![쿠버네티스 클러스터 구성 및 관리 - 08  RBAC](https://user-images.githubusercontent.com/52024566/160418341-ed661399-aae2-46a2-9d30-02e1b27d3004.png "쿠버네티스 클러스터 구성 및 관리 - 08  RBAC")

- 관리자에게는 모든 권한 부여