---
layout: post
title: 그림으로 배우는 쿠버네티스 - 5. 애플리케이션 볼륨 사용법
tags: [Kubernetes, Pick8s, UF]
permalink: /docs/Kubernetes/Pick8s/5
date: 2022-03-14 23:00:00
---
# 애플리케이션 볼륨 사용법
## 빈디렉터리(emptydir)
### pod-emptydir.yaml

![애플리케이션 볼륨 사용법 - 01  빈디렉터리](https://user-images.githubusercontent.com/52024566/158608473-5a8aa596-d4c6-46d1-a189-854ed624576e.png)

- html-builder라는 컨테이너에서 생성한 페이지가 empty-directory 볼륨을 통하여 web-page 컨테이너에서 사용됨

## 호스트경로(hostpath)

![애플리케이션 볼륨 사용법 - 02  호스트경로](https://user-images.githubusercontent.com/52024566/158608408-02a9c0b1-8517-4e19-8063-07fd05fd0b16.png)

- 각 노드(host)의 로컬 파일시스템의 파일 및 디렉토리를 Pod의 볼륨으로 제공
- 각 노드의 로그를 확인하기 위하여 호스트경로를 사용할 경우 Deployment로 배포하면 각 노드에 균등하게 배포되지 않을 가능성이 존재
    - 이러한 목적으로 사용할 경우 DaemonSet을 사용함

## NFS 볼륨

![애플리케이션 볼륨 사용법 - 03  NFS 볼륨](https://user-images.githubusercontent.com/52024566/158608410-6c29b2a7-e88d-4101-bad4-f02e5467fb19.png)

- NFS 서버의 `/nfs_shared/nfs-vol` 디렉토리를 컨테이너의 `/audit`에 마운트

## 퍼시스턴트볼륨(PV)과 퍼시스턴트볼륨클레임(PVC)

![애플리케이션 볼륨 사용법 - 04  PV와 PVC](https://user-images.githubusercontent.com/52024566/158608414-d78c4eb9-b763-42e1-95ed-c578e9e178ef.png)

- emptyDir에는 관리자가 관여하지 않음

![애플리케이션 볼륨 사용법 - 05  PV와 PVC](https://user-images.githubusercontent.com/52024566/158608417-3947e258-ebbd-4ed4-8963-340bd7757cb0.png)

- 사용자는 NFS에 직접 마운트하지 않고 PVC를 선언하여 PV를 사용함
- 새로운 Deployment가 배포되고 새로운 PVC가 선언될 경우 기존의 PV를 사용할 수 있음

###  persistentvolume-nfs.yaml, persistentvolumeclaim-nfs.yaml

![애플리케이션 볼륨 사용법 - 06  PV와 PVC](https://user-images.githubusercontent.com/52024566/158608421-05eae23c-221e-43db-a57f-4933cf1e5d93.png)

### deploy-pvc.yaml (+pvc)

![애플리케이션 볼륨 사용법 - 07  PV와 PVC](https://user-images.githubusercontent.com/52024566/158608424-2ebc93f0-fc2f-46f6-aa41-1926637c5dc8.png)

- `claimName`을 통하여 PV에 접근

## 스토리지클래스(StorageClass)
## 볼륨클레임템플릿(volumeClaimTemplates)